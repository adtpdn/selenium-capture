
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Experimental Selenium Test Results</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            width: 70%;
            margin: 0 auto;
            padding: 50px;
        }
        h1, h2 {
            text-align: center;
            margin-bottom: 30px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
            text-align: center;
        }
        .screenshot {
            width: 100px;
            height: 100px;
            cursor: pointer;
            object-fit: cover;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            padding-top: 50px;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.9);
        }
        .modal-content {
            margin: auto;
            display: block;
            max-width: 90%;
            max-height: 90%;
        }
        .close {
            position: absolute;
            top: 15px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
        }
        .close:hover,
        .close:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Selenium Test Results</h1>
    <div id="testResults"></div>

    <div id="myModal" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="modalImg">
    </div>

    <script>
        const testResults = [{"timestamp": "2024-10-01 01:30:18", "results": [{"url": "https://adengroup.com", "browser": "chrome", "device": "desktop", "screenshot": "screenshots/adengroup.com_chrome_desktop_20241001_012452.png", "status": "Pass"}, {"url": "https://adengroup.com", "browser": "chrome", "device": "mobile", "screenshot": "screenshots/adengroup.com_chrome_mobile_20241001_012508.png", "status": "Pass"}, {"url": "https://adengroup.com", "browser": "firefox", "device": "desktop", "screenshot": "screenshots/adengroup.com_firefox_desktop_20241001_012527.png", "status": "Pass"}, {"url": "https://adengroup.com", "browser": "firefox", "device": "mobile", "screenshot": "screenshots/adengroup.com_firefox_mobile_20241001_012545.png", "status": "Pass"}, {"url": "https://adengroup.com", "browser": "edge", "device": "desktop", "screenshot": "screenshots/adengroup.com_edge_desktop_20241001_012638.png", "status": "Pass"}, {"url": "https://adengroup.com", "browser": "edge", "device": "mobile", "screenshot": "screenshots/adengroup.com_edge_mobile_20241001_012654.png", "status": "Pass"}, {"url": "https://nx-park.com", "browser": "chrome", "device": "desktop", "screenshot": "screenshots/nx-park.com_chrome_desktop_20241001_012711.png", "status": "Pass"}, {"url": "https://nx-park.com", "browser": "chrome", "device": "mobile", "screenshot": "screenshots/nx-park.com_chrome_mobile_20241001_012728.png", "status": "Pass"}, {"url": "https://nx-park.com", "browser": "firefox", "device": "desktop", "screenshot": "screenshots/nx-park.com_firefox_desktop_20241001_012747.png", "status": "Pass"}, {"url": "https://nx-park.com", "browser": "firefox", "device": "mobile", "screenshot": "screenshots/nx-park.com_firefox_mobile_20241001_012806.png", "status": "Pass"}, {"url": "https://nx-park.com", "browser": "edge", "device": "desktop", "screenshot": "screenshots/nx-park.com_edge_desktop_20241001_012823.png", "status": "Pass"}, {"url": "https://nx-park.com", "browser": "edge", "device": "mobile", "screenshot": "screenshots/nx-park.com_edge_mobile_20241001_012840.png", "status": "Pass"}, {"url": "https://adenenergies.com", "browser": "chrome", "device": "desktop", "screenshot": "screenshots/adenenergies.com_chrome_desktop_20241001_012855.png", "status": "Pass"}, {"url": "https://adenenergies.com", "browser": "chrome", "device": "mobile", "screenshot": "screenshots/adenenergies.com_chrome_mobile_20241001_012911.png", "status": "Pass"}, {"url": "https://adenenergies.com", "browser": "firefox", "device": "desktop", "screenshot": "screenshots/adenenergies.com_firefox_desktop_20241001_012927.png", "status": "Pass"}, {"url": "https://adenenergies.com", "browser": "firefox", "device": "mobile", "screenshot": "screenshots/adenenergies.com_firefox_mobile_20241001_012944.png", "status": "Pass"}, {"url": "https://adenenergies.com", "browser": "edge", "device": "desktop", "screenshot": "screenshots/adenenergies.com_edge_desktop_20241001_013000.png", "status": "Pass"}, {"url": "https://adenenergies.com", "browser": "edge", "device": "mobile", "screenshot": "screenshots/adenenergies.com_edge_mobile_20241001_013017.png", "status": "Pass"}]}];

        function createTable(results) {
            const urls = [...new Set(results.map(r => r.url))];
            const browserDevices = ['chrome desktop', 'chrome mobile', 'firefox desktop', 'firefox mobile', 'edge desktop', 'edge mobile'];
            
            let tableHtml = '<table><tr><th>URL</th>';
            browserDevices.forEach(bd => {
                tableHtml += `<th>${bd}</th>`;
            });
            tableHtml += '</tr>';

            urls.forEach(url => {
                tableHtml += `<tr><td>${url}</td>`;
                browserDevices.forEach(bd => {
                    const [browser, device] = bd.split(' ');
                    const result = results.find(r => r.url === url && r.browser === browser && r.device === device);
                    if (result) {
                        tableHtml += `<td><img src="${result.screenshot}" alt="Screenshot" class="screenshot" onclick="openModal(this.src)"></td>`;
                    } else {
                        tableHtml += '<td>N/A</td>';
                    }
                });
                tableHtml += '</tr>';
            });

            tableHtml += '</table>';
            return tableHtml;
        }

        function renderResults() {
            const testResultsDiv = document.getElementById('testResults');
            let resultsHtml = '';

            testResults.forEach((testRun, index) => {
                resultsHtml += `
                    <h2>${testRun.timestamp}${index === 0 ? ' (Latest)' : ''}</h2>
                    ${createTable(testRun.results)}
                `;
            });
            testResultsDiv.innerHTML = resultsHtml;
        }

        // Modal functionality
        const modal = document.getElementById("myModal");
        const modalImg = document.getElementById("modalImg");
        const closeBtn = document.getElementsByClassName("close")[0];
        let scale = 1;
        let panning = false;
        let pointX = 0;
        let pointY = 0;
        let start = { x: 0, y: 0 };

        function openModal(imgSrc) {
            modal.style.display = "block";
            modalImg.src = imgSrc;
            scale = 1;
            modalImg.style.transform = `scale(${scale})`;
        }

        closeBtn.onclick = function() {
            modal.style.display = "none";
        }

        modalImg.onmousedown = function(e) {
            e.preventDefault();
            start = { x: e.clientX - pointX, y: e.clientY - pointY };
            panning = true;
        }

        modalImg.onmouseup = function(e) {
            panning = false;
        }

        modalImg.onmousemove = function(e) {
            e.preventDefault();
            if (!panning) {
                return;
            }
            pointX = (e.clientX - start.x);
            pointY = (e.clientY - start.y);
            modalImg.style.transform = `translate(${pointX}px, ${pointY}px) scale(${scale})`;
        }

        modalImg.onwheel = function(e) {
            e.preventDefault();
            let xs = (e.clientX - pointX) / scale;
            let ys = (e.clientY - pointY) / scale;
            let delta = (e.wheelDelta ? e.wheelDelta : -e.deltaY);
            (delta > 0) ? (scale *= 1.2) : (scale /= 1.2);
            pointX = e.clientX - xs * scale;
            pointY = e.clientY - ys * scale;

            modalImg.style.transform = `translate(${pointX}px, ${pointY}px) scale(${scale})`;
        }

        // Touch events for mobile pinch zoom
        let evCache = [];
        let prevDiff = -1;

        modalImg.ontouchstart = function(e) {
            e.preventDefault();
            for (let i = 0; i < e.touches.length; i++) {
                evCache.push(e.touches[i]);
            }
        }

        modalImg.ontouchmove = function(e) {
            e.preventDefault();
            if (e.touches.length === 2) {
                let curDiff = Math.abs(e.touches[0].clientX - e.touches[1].clientX);

                if (prevDiff > 0) {
                    if (curDiff > prevDiff) {
                        scale *= 1.02;
                    }
                    if (curDiff < prevDiff) {
                        scale /= 1.02;
                    }
                    modalImg.style.transform = `translate(${pointX}px, ${pointY}px) scale(${scale})`;
                }

                prevDiff = curDiff;
            }
        }

        modalImg.ontouchend = function(e) {
            evCache = [];
            prevDiff = -1;
        }

        // Initial render
        renderResults();
    </script>
</body>
</html>
    